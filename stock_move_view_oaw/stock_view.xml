<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_move_tree_extended" model="ir.ui.view">
            <field name="name">stock.move.tree.extended</field>
            <field name="model">stock.move</field>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="grey:state == 'cancel';red:(state not in ('cancel','done')) and date > current_date" string="Moves">
                    <field name="name" invisible="1"/>
                    <field name="picking_id" string="Reference"/>
                    <field name="origin"/>
                    <field name="group_id"/>
                    <field name="pick_partner_id"/>
                    <field name="quant_owner_id"/>
                    <field name="picking_type_id"/>
                    <field name="create_date" invisible="1" groups="base.group_no_one"/>
                    <field name="product_id" on_change="onchange_product_id(product_id,location_id,location_dest_id, False)"/>
                    <field name="quant_lot_id"/>
                    <field name="product_uom_qty" on_change="onchange_quantity(product_id, product_uom_qty, product_uom, product_uos)"/>
                    <field name="product_uom" string="Unit of Measure" groups="product.group_uom"/>
                    <field name="product_uos_qty" groups="product.group_uos"/>
                    <field name="product_uos" groups="product.group_uos"/>
                    <field name="price_unit"/>
                    <field name="location_id" groups="stock.group_locations"/>
                    <field name="location_dest_id" groups="stock.group_locations"/>
                    <field name="date" groups="base.group_no_one"/>
                    <field name="date_expected" invisible="1"/>
                    <field name="state"/>
                    <button name="action_done" states="confirmed,assigned" string="Process" type="object" 
                            groups="stock.group_stock_user" icon="gtk-go-forward" help="Done"/>
                </tree>
            </field>
        </record>

        <record id='action_move_extended' model='ir.actions.act_window'>
            <field name="name">Stock Moves (Ext.)</field>
            <field name="res_model">stock.move</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_move_tree_extended"/>
            <field name="search_view_id" ref="stock.view_move_search"/>
        </record>
 
		<menuitem id="menu_action_move_extended"
		    parent="stock.menu_traceability"
		    action="action_move_extended"
		    sequence="5"
		    groups="stock.group_locations"/>

    </data>
</openerp>
